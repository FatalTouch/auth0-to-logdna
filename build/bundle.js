module.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=36)}([function(e,t){e.exports=require("auth0-extension-tools@1.2.1")},function(e,t,r){"use strict";e.exports=r(0).config()},function(e,t,r){const n=r(29),o=r(8),i=r(22),s=r(28);e.exports.createServer=n.createServer,e.exports.urlHelpers=o,e.exports.middlewares=i,e.exports.routes=s},function(e,t){e.exports=require("express@4.12.4")},function(e,t,r){"use strict";var n=r(69);n.emitErrs=!0;var o=new n.Logger({transports:[new n.transports.Console({timestamp:!0,level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1});e.exports=o,e.exports.stream={write:function(e){o.info(e.replace(/\n$/,""))}}},function(e,t,r){"use strict";var n,o=r(6),i=0===process.version.indexOf("v0.10.");n=i?function(){r.i({NODE_ENV:"production",CLIENT_VERSION:"1.0.0"}).NODE_DEBUG&&/agentkeepalive/.test(r.i({NODE_ENV:"production",CLIENT_VERSION:"1.0.0"}).NODE_DEBUG)&&console.log.apply(console.log,arguments)}:o.debuglog("agentkeepalive"),t.debug=n,t.isNode10=i,t.inherits=o.inherits},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);e=e||{},e.keepAlive=!1!==e.keepAlive,void 0===e.keepAliveTimeout&&(e.keepAliveTimeout=15e3),void 0===e.timeout&&(e.timeout=2*e.keepAliveTimeout),a.call(this,e);var t=this;t.createSocketCount=0,t.closeSocketCount=0,t.errorSocketCount=0,t.requestCount=0,t.timeoutSocketCount=0,t.on("free",function(){t.requestCount++}),t.on("timeout",function(){t.timeoutSocketCount++}),t.on("close",function(){t.closeSocketCount++}),t.on("error",function(){t.errorSocketCount++})}function o(e){var t={};for(var r in e)t[r]=e[r].length;return t}var i=r(12),s=r(5),a=r(17).Agent;i.Agent;e.exports=n,s.inherits(n,a),n.prototype.createSocket=function(e,t){var r=a.prototype.createSocket.call(this,e,t);return this.keepAlive&&r.setNoDelay(!0),this.createSocketCount++,r},n.prototype.getCurrentStatus=function(){return{createSocketCount:this.createSocketCount,closeSocketCount:this.closeSocketCount,errorSocketCount:this.errorSocketCount,timeoutSocketCount:this.timeoutSocketCount,requestCount:this.requestCount,freeSockets:o(this.freeSockets),sockets:o(this.sockets),requests:o(this.requests)}}},function(e,t,r){function n(e){if(!e.container)return null;const t=e.container.replace(u,"\\$&"),r=e.jtn?e.jtn.replace(u,"\\$&"):"";if(e.url_format===a)return new RegExp("^/api/run/"+t+"/(?:"+r+"/?)?");if(e.url_format===s)return new RegExp("^/"+t+"/(?:"+r+"/?)?");if(e.url_format===i)return new RegExp("^/(?:"+r+"/?)?");throw new Error("Unsupported webtask URL format.")}const o=r(14),i=3,s=2,a=1,u=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,c=function(e,t){var r=o.parse(e).pathname||"";return r=r.replace(t,"").replace(/^\/|\/$/g,""),r.startsWith("/")||(r="/"+r),r.endsWith("/")||(r+="/"),r};e.exports.getBasePath=function(e){return c(e.originalUrl||"",e.path)},e.exports.getBaseUrl=function(e,t){var r=t;const n=o.parse(e.originalUrl||"").pathname||"";return o.format({protocol:r||"https",host:e.headers.host,pathname:n.replace(e.path,"").replace(/\/$/g,"")})},e.exports.getWebtaskUrl=function(e){const t=n(e.x_wt),r=e.url,i=e.url.replace(t,"/"),s=o.parse(i||"").pathname,a=o.parse(r||"").pathname||"";var u=o.format({protocol:"https",host:e.headers.host,pathname:a.replace(s,"").replace(/\/$/g,"")});return e.x_wt&&(0===u.indexOf("https://sandbox.it.auth0.com")?u=u.replace("https://sandbox.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".us.webtask.io/"):0===u.indexOf("https://sandbox-eu.it.auth0.com")?u=u.replace("https://sandbox-eu.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".eu.webtask.io/"):0===u.indexOf("https://sandbox-au.it.auth0.com")&&(u=u.replace("https://sandbox-au.it.auth0.com/api/run/"+e.x_wt.container+"/","https://"+e.x_wt.container+".au.webtask.io/"))),u}},function(e,t,r){"use strict";var n=r(51);e.exports=function(e,t,r){return function(o,i,s){var a=n(s);return!0===e||"function"==typeof e&&e(o,i,a)?t(o,i,a):r?r(o,i,a):a()}}},function(e,t,r){"use strict";function n(e){this.message=e}var o=r(42);n.prototype=new Error,n.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new n("Invalid token specified");t=t||{};var r=!0===t.header?0:1;try{return JSON.parse(o(e.split(".")[r]))}catch(e){throw new n("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=n},function(e,t){e.exports=require("express-jwt@3.1.0")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";(function(t){var n=(r(14),r(13)),o=r(64),i=r(3),s=r(54),a=r(0),u=r(2),c=r(34),l=r(35),f=r(32),p=r(4),h=r(1),d=r(31);e.exports=function(e,r){h.setProvider(e);var g=r?new a.WebtaskStorageContext(r,{force:1}):new a.FileStorageContext(n.join(t,"./data.json"),{mergeWrites:!0}),v=new i;v.use(o(":method :url :status :response-time ms - :res[content-length]",{stream:p.stream}));var m=function(e){return function(t,r,n){return t.webtaskContext&&t.webtaskContext.body?(t.body=t.webtaskContext.body,n()):e(t,r,n)}};return v.use(m(s.json())),v.use(m(s.urlencoded({extended:!1}))),v.use("/meta",l()),v.use("/.extensions",f()),v.use(d(g)),v.use(u.routes.dashboardAdmins({secret:h("EXTENSION_SECRET"),audience:"urn:logs-to-logdna",rta:h("AUTH0_RTA").replace("https://",""),domain:h("AUTH0_DOMAIN"),baseUrl:h("PUBLIC_WT_URL")||h("WT_URL"),clientName:"Logs to Logdna",urlPrefix:"",sessionStorageKey:"logs-to-logdna:apiToken"})),v.use("/app",i.static(n.join(t,"../dist"))),v.use("/",c(g)),v.use(u.middlewares.errorHandler(p.error.bind(p))),v}}).call(t,"/")},function(e,t,r){e.exports=r(7),e.exports.HttpsAgent=r(18)},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);a.call(this);var t=this;t.defaultPort=80,t.protocol="http:",t.options=s._extend({},e),t.options.path=null,t.requests={},t.sockets={},t.freeSockets={},t.keepAliveMsecs=t.options.keepAliveMsecs||1e3,t.keepAlive=t.options.keepAlive||!1,t.keepAliveTimeout=t.options.keepAliveTimeout||0,t.timeout=t.options.timeout||0,t.maxSockets=t.options.maxSockets||n.defaultMaxSockets,t.maxFreeSockets=t.options.maxFreeSockets||256,t.on("free",function(e,r){var n=t.getName(r);if(u("agent.on(free)",n),!e.destroyed&&t.requests[n]&&t.requests[n].length)t.requests[n].shift().onSocket(e),0===t.requests[n].length&&delete t.requests[n],u("continue handle next request");else{var i=e._httpMessage;if(i&&i.shouldKeepAlive&&!e.destroyed&&t.options.keepAlive){var s=t.freeSockets[n],a=s?s.length:0,c=a;t.sockets[n]&&(c+=t.sockets[n].length),c>t.maxSockets||a>=t.maxFreeSockets?(t.removeSocket(e,r),e.destroy()):(s=s||[],t.freeSockets[n]=s,e.setKeepAlive(!0,t.keepAliveMsecs),e.unref&&e.unref(),e._httpMessage=null,t.removeSocket(e,r),s.push(e),0===e.listeners("error").length&&e.once("error",o),e.setTimeout(t.keepAliveTimeout))}else t.removeSocket(e,r),e.destroy()}})}function o(e){var t=this;u("SOCKET ERROR on FREE socket:",e.message,e.stack),t.destroy(),t.emit("agentRemove")}var i=r(65),s=r(6),a=r(59).EventEmitter,u=r(5).debug;s.inherits(n,a),t.Agent=n,n.defaultMaxSockets=1/0,n.prototype.createConnection=i.createConnection,n.prototype.getName=function(e){var t="";return e.host?t+=e.host:t+="localhost",t+=":",e.port&&(t+=e.port),t+=":",e.localAddress&&(t+=e.localAddress),t+=":"},n.prototype.addRequest=function(e,t){"string"==typeof t&&(t={host:t,port:arguments[2],path:arguments[3]}),t=s._extend({},t),t=s._extend(t,this.options);var r=this.getName(t);this.sockets[r]||(this.sockets[r]=[]);var n=this.freeSockets[r]?this.freeSockets[r].length:0,i=n+this.sockets[r].length;if(n){var a=this.freeSockets[r].shift();u("have free socket"),a.removeListener("error",o),a.setTimeout(this.timeout),this.freeSockets[r].length||delete this.freeSockets[r],a.ref&&a.ref(),e.onSocket(a),this.sockets[r].push(a)}else i<this.maxSockets?(u("call onSocket",i,n),e.onSocket(this.createSocket(e,t))):(u("wait for socket"),this.requests[r]||(this.requests[r]=[]),this.requests[r].push(e))},n.prototype.createSocket=function(e,t){function r(){a.emit("free",f,t)}function n(e){u("CLIENT socket onClose"),"boolean"!=typeof f.destroyed&&(f.destroyed=!0),a.removeSocket(f,t),a.emit("close")}function o(){u("CLIENT socket onTimeout"),f.destroy(),a.removeSocket(f,t),a.emit("timeout")}function i(){u("CLIENT socket onRemove"),a.removeSocket(f,t),f.removeListener("close",n),f.removeListener("free",r),f.removeListener("agentRemove",i),f.setTimeout(0,o)}var a=this;if(t=s._extend({},t),t=s._extend(t,a.options),!t.servername&&(t.servername=t.host,e)){var c=e.getHeader("host");c&&(t.servername=c.replace(/:.*$/,""))}var l=a.getName(t);u("createConnection",l,t),t.encoding=null;var f=a.createConnection(t);return a.sockets[l]||(a.sockets[l]=[]),this.sockets[l].push(f),u("sockets",l,this.sockets[l].length),f.on("free",r),f.on("close",n),f.on("timeout",o),f.setTimeout(a.timeout),f.on("agentRemove",i),f},n.prototype.removeSocket=function(e,t){var r,n,o=this.getName(t);u("removeSocket",o,"destroyed:",e.destroyed);var i=[this.sockets];e.destroyed&&i.push(this.freeSockets);for(var s=0;s<i.length;s++){var a=i[s];if(a[o]){var c=a[o].indexOf(e);-1!==c&&(a[o].splice(c,1),0===a[o].length&&delete a[o])}}if(r=this.freeSockets[o]?this.freeSockets[o].length:0,n=r+this.sockets[o]?this.sockets[o].length:0,this.requests[o]&&this.requests[o].length&&n<this.maxSockets){u("removeSocket, have a request, make a socket");var l=this.requests[o][0];this.createSocket(l,t).emit("free")}},n.prototype.destroy=function(){for(var e=[this.freeSockets,this.sockets],t=0;t<e.length;t++)for(var r=e[t],n=Object.keys(r),o=0;o<n.length;o++)for(var i=r[n[o]],s=0;s<i.length;s++)i[s].destroy()},t.globalAgent=new n},function(e,t,r){"use strict";var n,o=r(12),i=r(5),s=r(7),a=o.Agent;i.isNode10?(n=function(e){s.call(this,e),this.defaultPort=443,this.protocol="https:"},i.inherits(n,s),n.prototype.createConnection=o.globalAgent.createConnection,n.prototype.getName=function(e){var t=s.prototype.getName.call(this,e);return t+=":",e.ca&&(t+=e.ca),t+=":",e.cert&&(t+=e.cert),t+=":",e.ciphers&&(t+=e.ciphers),t+=":",e.key&&(t+=e.key),t+=":",e.pfx&&(t+=e.pfx),t+=":",void 0!==e.rejectUnauthorized&&(t+=e.rejectUnauthorized),t}):(n=function(e){s.call(this,e),this.defaultPort=443,this.protocol="https:",this.maxCachedSessions=this.options.maxCachedSessions,void 0===this.maxCachedSessions&&(this.maxCachedSessions=100),this._sessionCache={map:{},list:[]}},i.inherits(n,s),["createConnection","getName","_getSession","_cacheSession","_evictSession"].forEach(function(e){"function"==typeof a.prototype[e]&&(n.prototype[e]=a.prototype[e])})),e.exports=n},function(e,t,r){const n=r(10),o=r(11),i=r(0),s=r(9);e.exports=function(e){if(!e||"object"!=typeof e)throw new i.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new i.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new i.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.baseUrl||void 0===e.baseUrl)throw new i.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new i.ArgumentError("The provided base URL is invalid: "+e.baseUrl);const t=o({audience:e.audience,issuer:e.baseUrl,secret:e.secret,algorithms:["HS256"],credentialsRequired:e.credentialsRequired||!0});return function(r,n,o){t(r,n,function(t){return t?o(t):e.onLoginSuccess?e.onLoginSuccess(r,n,o):o()})}},e.exports.optional=function(t){const r=e.exports(t);return s(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const r=n(e.headers.authorization.split(" ")[1]);return r&&r.iss===t.baseUrl}catch(e){return!1}return!1},r)}},function(e,t,r){const n=r(10),o=r(11),i=r(61),s=r(0),a=r(9),u=r(0).UnauthorizedError;e.exports=function(e){if(!e||"object"!=typeof e)throw new s.ArgumentError("Must provide the options");if(null===e.domain||void 0===e.domain)throw new s.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new s.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.audience||void 0===e.audience)throw new s.ArgumentError("Must provide a valid audience");if("string"!=typeof e.audience||0===e.audience.length)throw new s.ArgumentError("The provided audience is invalid: "+e.audience);const t=o({secret:i.expressJwtSecret({cache:!0,rateLimit:!0,jwksRequestsPerMinute:5,jwksUri:"https://"+e.domain+"/.well-known/jwks.json",handleSigningKeyError:function(e,t){return t(e instanceof i.SigningKeyNotFoundError?new u("A token was provided with an invalid kid"):e)}}),audience:e.audience,issuer:"https://"+e.domain+"/",algorithms:["RS256"],credentialsRequired:e&&e.credentialsRequired||!0});return function(r,n,o){t(r,n,function(t){return t?o(t):e.onLoginSuccess?e.onLoginSuccess(r,n,o):o()})}},e.exports.optional=function(t){const r=e.exports(t);return a(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const r=n(e.headers.authorization.split(" ")[1]);return r&&r.iss==="https://"+t.domain+"/"}catch(e){return!1}return!1},r)}},function(e,t,r){e.exports=function(e){return function(t,r,n,o){return e&&e(t),t&&t.status?(n.status(t.status),n.json({error:t.code||t.name,message:t.message||t.name})):(n.status(t.status||500),n.json({error:"InternalServerError",message:t.message||t.name}))}}},function(e,t,r){e.exports.authenticateAdmins=r(19),e.exports.authenticateUsers=r(20),e.exports.requireAuthentication=r(24),e.exports.errorHandler=r(21),e.exports.managementApiClient=r(23),e.exports.validateHookToken=r(25),e.exports.webtaskConfig=r(26)},function(e,t,r){const n=r(0);e.exports=function(e){return function(t,r,o){const i=t,s=t.user&&t.user.access_token&&t.user.access_token.length,a=s?{domain:e.domain,accessToken:t.user.access_token}:e;n.managementApi.getClient(a).then(function(e){return i.auth0=e,o(),null}).catch(function(e){o(e)})}}},function(e,t,r){const n=r(0).UnauthorizedError;e.exports=function(e,t,r){return e.user?r():r(new n("Authentication required for this endpoint."))}},function(e,t,r){const n=r(0);e.exports=function(e,t,r){if(null===e||void 0===e)throw new n.ArgumentError("Must provide the domain");if("string"!=typeof e||0===e.length)throw new n.ArgumentError("The provided domain is invalid: "+e);if(null===t||void 0===t)throw new n.ArgumentError("Must provide the webtaskUrl");if("string"!=typeof t||0===t.length)throw new n.ArgumentError("The provided webtaskUrl is invalid: "+t);if(null===r||void 0===r)throw new n.ArgumentError("Must provide the extensionSecret");if("string"!=typeof r||0===r.length)throw new n.ArgumentError("The provided extensionSecret is invalid: "+r);return function(o){if(null===o||void 0===o)throw new n.ArgumentError("Must provide the hookPath");if("string"!=typeof o||0===o.length)throw new n.ArgumentError("The provided hookPath is invalid: "+o);return function(i,s,a){if(i.headers.authorization&&"Bearer"===i.headers.authorization.split(" ")[0]){const u=i.headers.authorization.split(" ")[1];try{if(n.validateHookToken(e,t,o,r,u))return a()}catch(e){return a(e)}}return a(new n.HookTokenError("Hook token missing for the call to: "+o))}}}},function(e,t,r){const n=r(0);e.exports=function(e){return function(t,r,o){return t.webtaskContext&&e.setProvider(n.configProvider.fromWebtaskContext(t.webtaskContext)),o()}}},function(e,t,r){const n=r(3),o=r(57),i=r(37),s=r(0),a=r(8);e.exports=function(e){if(!e||"object"!=typeof e)throw new s.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new s.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new s.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new s.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new s.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.rta||void 0===e.rta)throw new s.ArgumentError("Must provide a valid rta");if("string"!=typeof e.rta||0===e.rta.length)throw new s.ArgumentError("The provided rta is invalid: "+e.rta);if(null===e.domain||void 0===e.domain)throw new s.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new s.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.baseUrl||void 0===e.baseUrl)throw new s.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new s.ArgumentError("The provided base URL is invalid: "+e.baseUrl);if(null===e.clientName||void 0===e.clientName)throw new s.ArgumentError("Must provide a valid client name");if("string"!=typeof e.clientName||0===e.clientName.length)throw new s.ArgumentError("The provided client name is invalid: "+e.clientName);const t=e.stateKey||"state",r=e.urlPrefix||"",u=e.sessionStorageKey||"apiToken",c=n.Router();return c.get(r+"/login",function(n,i){const u=o.randomBytes(16).toString("hex");i.cookie(t,u);const c=new s.SessionManager(e.rta,e.domain,e.baseUrl),l=c.createAuthorizeUrl({redirectUri:a.getBaseUrl(n)+r+"/login/callback",scopes:e.scopes,expiration:e.expiration});i.redirect(l+"&state="+u)}),c.post(r+"/login/callback",i(),function(r,n,o){return r.cookies&&r.cookies[t]===r.body.state?new s.SessionManager(e.rta,e.domain,e.baseUrl).create(r.body.id_token,r.body.access_token,{secret:e.secret,issuer:e.baseUrl,audience:e.audience}).then(function(e){n.header("Content-Type","text/html"),n.status(200).send('<html><head><script type="text/javascript">sessionStorage.setItem("'+u+'", "'+e+'");window.location.href = "'+a.getBaseUrl(r)+'";<\/script></head></html>')}).catch(function(e){o(e)}):o(new s.ValidationError("Login failed. State mismatch."))}),c.get(r+"/logout",function(t,r){const n=encodeURIComponent(a.getBaseUrl(t));r.header("Content-Type","text/html"),r.status(200).send('<html><head><script type="text/javascript">sessionStorage.removeItem("'+u+'");window.location.href = "https://'+e.rta+"/v2/logout/?returnTo="+n+"&client_id="+n+'";<\/script></head></html>')}),c.get("/.well-known/oauth2-client-configuration",function(t,n){n.header("Content-Type","application/json"),n.status(200).send({redirect_uris:[a.getBaseUrl(t)+r+"/login/callback"],client_name:e.clientName,post_logout_redirect_uris:[a.getBaseUrl(t)]})}),c}},function(e,t,r){e.exports.dashboardAdmins=r(27)},function(e,t,r){const n=r(0),o=r(68);e.exports.createServer=function(e){const t=n.createServer(e);var r=null;return o.fromExpress(function(e,n){return r||(r=t(e.webtaskContext)),r(e,n)})}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var n=(r(52),r(63)),o=r(46),i=r(53),s=r(1),a=r(4);e.exports=function(e){return function(t,r,u){var c=t.webtaskContext&&t.webtaskContext.body||t.body||{},l=t.webtaskContext&&t.webtaskContext.headers||{};if(!(c.schedule&&"active"===c.state||l.referer===s("AUTH0_MANAGE_URL")+"/"&&l["if-none-match"]))return u();var f={app:s("LOGDNA_TAG"),env:"production",index_meta:s("LOGDNA_INDEX_META")},p=(o.setupDefaultLogger(s("LOGDNA_KEY",f)),function(e,t){if(!e||!e.length)return t();a.info("Sending "+e.length+" logs to Logdna."),loggly.log(e,function(e){return e?(a.info("Error sending logs to Logdna",e),t(e)):(a.info("Upload complete."),t())})}),h=new i.reporters.SlackReporter({hook:s("SLACK_INCOMING_WEBHOOK_URL"),username:"auth0-logs-to-loggly",title:"Logs To Loggly"}),d={domain:s("AUTH0_DOMAIN"),clientId:s("AUTH0_CLIENT_ID"),clientSecret:s("AUTH0_CLIENT_SECRET"),batchSize:parseInt(s("BATCH_SIZE"),10),startFrom:s("START_FROM"),logLevel:s("LOG_LEVEL"),logTypes:s("LOG_TYPES")};(!d.batchSize||d.batchSize>100)&&(d.batchSize=100),d.logTypes&&!Array.isArray(d.logTypes)&&(d.logTypes=d.logTypes.replace(/\s/g,"").split(","));var g=new i.LogsProcessor(e,d),v=function(t){var r=new Date,n=r.getTime(),o=n-864e5;g.getReport(o,n).then(function(e){return h.send(e,e.checkpoint)}).then(function(){return e.read()}).then(function(r){return r.lastReportDate=t,e.write(r)})},m=function(){e.read().then(function(e){var t=n().format("DD-MM-YYYY"),r=s("DAILY_REPORT_TIME")||16;e.lastReportDate!==t&&(new Date).getHours()>=r&&v(t)})};return g.run(p).then(function(e){e&&e.status&&e.status.error?h.send(e.status,e.checkpoint):!0!==s("SLACK_SEND_SUCCESS")&&"true"!==s("SLACK_SEND_SUCCESS")||h.send(e.status,e.checkpoint),m(),r.json(e)}).catch(function(e){h.send({error:e,logsProcessed:0},null),m(),u(e)})}}},function(e,t,r){"use strict";var n=r(3).Router,o=r(2).middlewares,i=r(1),s=r(4);e.exports=function(){var e=n(),t=o.validateHookToken(i("AUTH0_DOMAIN"),i("WT_URL"),i("EXTENSION_SECRET"));return e.use("/on-uninstall",t("/.extensions/on-uninstall")),e.use(o.managementApiClient({domain:i("AUTH0_DOMAIN"),clientId:i("AUTH0_CLIENT_ID"),clientSecret:i("AUTH0_CLIENT_SECRET")})),e.delete("/on-uninstall",function(e,t){var r=i("AUTH0_CLIENT_ID");e.auth0.clients.delete({client_id:r}).then(function(){s.debug("Deleted client "+r),t.sendStatus(204)}).catch(function(e){s.debug("Error deleting client: "+i("AUTH0_CLIENT_ID")),s.error(e),t.sendStatus(204)})}),e}},function(e,t,r){"use strict";(function(t){var n=(r(60),r(58)),o=(r(13),r(2).urlHelpers),i=r(1);e.exports=function(){var e='\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n    <title><%= config.TITLE %></title>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/4.6.13/lib/logos/img/favicon.png">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styles/zocial.min.css" />\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.1672/css/index.min.css" />\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/4.6.13/index.min.css" />\n    <% if (assets.style) { %><link rel="stylesheet" type="text/css" href="/app/<%= assets.style %>" /><% } %>\n    \x3c!--<% if (assets.version) { %><link rel="stylesheet" type="text/css" href="//cdn.auth0.com/extensions/auth0-logs-to-loggly/assets/auth0-logs-to-loggly.ui.<%= assets.version %>.css" /><% } %>--\x3e\n    <% if (assets.customCss) { %><link rel="stylesheet" type="text/css" href="<%= assets.customCss %>" /><% } %>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="text/javascript" src="//cdn.auth0.com/w2/auth0-7.0.4.min.js"><\/script>\n    <script type="text/javascript" src="//cdn.auth0.com/manage/v0.3.1672/js/bundle.js"><\/script>\n    <script type="text/javascript">window.config = <%- JSON.stringify(config) %>;<\/script>\n    <% if (assets.vendors) { %><script type="text/javascript" src="/app/<%= assets.vendors %>"><\/script><% } %>\n    <% if (assets.app) { %><script type="text/javascript" src="/app/<%= assets.app %>"><\/script><% } %>\n    <% if (assets.version) { %>\n    \x3c!--<script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-logs-to-loggly/assets/auth0-logs-to-loggly.ui.vendors.<%= assets.version %>.js"><\/script>--\x3e\n    \x3c!--<script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-logs-to-loggly/assets/auth0-logs-to-loggly.ui.<%= assets.version %>.js"><\/script>--\x3e\n    <% } %>\n  </body>\n  </html>\n  ';return function(t,r,s){if(0===t.url.indexOf("/api"))return s();var a={AUTH0_DOMAIN:i("AUTH0_DOMAIN"),AUTH0_CLIENT_ID:i("EXTENSION_CLIENT_ID"),AUTH0_MANAGE_URL:i("AUTH0_MANAGE_URL")||"https://manage.auth0.com",BASE_URL:o.getBaseUrl(t),BASE_PATH:o.getBasePath(t),TITLE:i("TITLE")};return r.send(n.render(e,{config:a,assets:{customCss:i("CUSTOM_CSS"),version:"1.0.0"}}))}}}).call(t,"/")},function(e,t,r){"use strict";var n=r(62),o=r(3).Router,i=r(2).middlewares,s=r(1),a=r(33);e.exports=function(e){var t=o(),r=i.authenticateAdmins({credentialsRequired:!0,secret:s("EXTENSION_SECRET"),audience:"urn:logs-to-logdna",baseUrl:s("PUBLIC_WT_URL")||s("WT_URL"),onLoginSuccess:function(e,t,r){return r()}}),u=i.managementApiClient({domain:s("AUTH0_DOMAIN"),clientId:s("AUTH0_CLIENT_ID"),clientSecret:s("AUTH0_CLIENT_SECRET")});return t.get("/",u,a()),t.get("/api/report",r,function(t,r,o){return e.read().then(function(e){var o=e&&e.logs?n.sortByOrder(e.logs,"start","desc"):[],i=t.query.filter&&"errors"===t.query.filter?n.filter(o,function(e){return!!e.error}):o,s=t.query.page&&parseInt(t.query.page)?parseInt(t.query.page)-1:0,a=t.query.per_page&&parseInt(t.query.per_page)||10,u=a*s;return r.json({logs:i.slice(u,u+a),total:i.length})}).catch(o)}),t}},function(e,t,r){"use strict";var n=r(3),o=r(39);e.exports=function(){var e=n.Router();return e.get("/",function(e,t){t.status(200).send(o)}),e}},function(e,t,r){"use strict";var n=r(2),o=r(15),i=r(1),s=r(4),a=n.createServer(function(e,t){return s.info("Starting Auth0 Logs to Logdna Extension - Version:","1.0.0"),o(e,t)});e.exports=function(e,t,r){i.setValue("PUBLIC_WT_URL",n.urlHelpers.getWebtaskUrl(t)),a(e,t,r)}},function(e,t,r){"use strict";function n(e,t){return function(r,n,o){if(r.cookies)return o();var s=r.headers.cookie,c=!e||Array.isArray(e)?e||[]:[e];if(r.secret=c[0],r.cookies=Object.create(null),r.signedCookies=Object.create(null),!s)return o();r.cookies=u.parse(s,t),0!==c.length&&(r.signedCookies=a(r.cookies,c),r.signedCookies=i(r.signedCookies)),r.cookies=i(r.cookies),o()}}function o(e){if("string"==typeof e&&"j:"===e.substr(0,2))try{return JSON.parse(e.slice(2))}catch(e){return}}function i(e){for(var t,r,n=Object.keys(e),i=0;i<n.length;i++)t=n[i],(r=o(e[t]))&&(e[t]=r);return e}function s(e,t){if("string"==typeof e){if("s:"!==e.substr(0,2))return e;for(var r=!t||Array.isArray(t)?t||[]:[t],n=0;n<r.length;n++){var o=c.unsign(e.slice(2),r[n]);if(!1!==o)return o}return!1}}function a(e,t){for(var r,n,o,i=Object.keys(e),a=Object.create(null),u=0;u<i.length;u++)n=i[u],o=e[n],r=s(o,t),o!==r&&(a[n]=r,delete e[n]);return a}var u=r(38),c=r(56);e.exports=n,e.exports.JSONCookie=o,e.exports.JSONCookies=i,e.exports.signedCookie=s,e.exports.signedCookies=a},function(e,t,r){"use strict";function n(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},o=e.split(u),a=n.decode||s,c=0;c<o.length;c++){var l=o[c],f=l.indexOf("=");if(!(f<0)){var p=l.substr(0,f).trim(),h=l.substr(++f,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),void 0==r[p]&&(r[p]=i(h,a))}}return r}function o(e,t,r){var n=r||{},o=n.encode||a;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!c.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!c.test(i))throw new TypeError("argument val is invalid");var s=e+"="+i;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");s+="; Max-Age="+Math.floor(u)}if(n.domain){if(!c.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain="+n.domain}if(n.path){if(!c.test(n.path))throw new TypeError("option path is invalid");s+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return s}function i(e,t){try{return t(e)}catch(t){return e}}t.parse=n,t.serialize=o;var s=decodeURIComponent,a=encodeURIComponent,u=/; */,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t){e.exports={title:"Auth0 Logs to Logdna",name:"auth0-logs-to-logdna",version:"1.0.0",author:"auth0",description:"This extension will take all of your Auth0 logs and export them to Logdna",initialUrlPath:"/login",type:"cron",category:"log_export",repository:"https://github.com/FatalTouch/auth0-to-logdna",docsUrl:"https://github.com/FatalTouch/auth0-to-logdna",logoUrl:"https://logdna.com/assets/images/logdna_logo_240w.png",keywords:["auth0","extension"],schedule:"0 */5 * * * *",auth0:{createClient:!0,onUninstallPath:"/.extensions/on-uninstall",scopes:"read:logs delete:clients"},secrets:{BATCH_SIZE:{description:"The amount of logs to batch before sending to Logstash. A single cron execution will send multiple batches.",default:100},LOGDNA_KEY:{description:"Logdna ingestion key",required:!0,type:"password"},LOGDNA_APP_TAG:{description:"App tag to identify logs (default auth0)",default:"auth0"},LOGDNA_INDEX_META:{description:"Enable indexing of meta data",default:!0,type:"select",allowMultiple:!1,options:[{value:!0,text:"True"},{value:!1,text:"False"}]},START_FROM:{description:"Checkpoint ID of log to start from."},SLACK_INCOMING_WEBHOOK_URL:{description:"Slack Incoming Webhook URL used to report statistics and possible failures"},SLACK_SEND_SUCCESS:{description:"This setting will enable verbose notifications to Slack which are useful for troubleshooting",type:"select",allowMultiple:!1,default:"false",options:[{value:"false",text:"No"},{value:"true",text:"Yes"}]},LOG_LEVEL:{description:"This allows you to specify the log level of events that need to be sent",type:"select",allowMultiple:!0,options:[{value:"-",text:""},{value:"0",text:"Debug"},{value:"1",text:"Info"},{value:"2",text:"Warning"},{value:"3",text:"Error"},{value:"4",text:"Critical"}]},LOG_TYPES:{description:"If you only want to send events with a specific type (eg: failed logins)",type:"select",allowMultiple:!0,options:[{text:"",value:"-"},{text:"Success Login",value:"s"},{text:"Success Exchange",value:"seacft"},{text:"Success Exchange (Client Credentials)",value:"seccft"},{text:"Failed Exchange",value:"feacft"},{text:"Failed Exchange (Client Credentials)",value:"feccft"},{text:"Failed Login",value:"f"},{text:"Warnings During Login",value:"w"},{text:"Deleted User",value:"du"},{text:"Failed Login (invalid email/username)",value:"fu"},{text:"Failed Login (wrong password)",value:"fp"},{text:"Failed by Connector",value:"fc"},{text:"Failed by CORS",value:"fco"},{text:"Connector Online",value:"con"},{text:"Connector Offline",value:"coff"},{text:"Failed Connector Provisioning",value:"fcpro"},{text:"Success Signup",value:"ss"},{text:"Failed Signup",value:"fs"},{text:"Code Sent",value:"cs"},{text:"Code/Link Sent",value:"cls"},{text:"Success Verification Email",value:"sv"},{text:"Failed Verification Email",value:"fv"},{text:"Success Change Password",value:"scp"},{text:"Failed Change Password",value:"fcp"},{text:"Success Change Email",value:"sce"},{text:"Failed Change Email",value:"fce"},{text:"Success Change Username",value:"scu"},{text:"Failed Change Username",value:"fcu"},{text:"Success Change Phone Number",value:"scpn"},{text:"Failed Change Phone Number",value:"fcpn"},{text:"Success Verification Email Request",value:"svr"},{text:"Failed Verification Email Request",value:"fvr"},{text:"Success Change Password Request",value:"scpr"},{text:"Failed Change Password Request",value:"fcpr"},{text:"Failed Sending Notification",value:"fn"},{text:"API Operation",value:"sapi"},{text:"Failed API Operation",value:"fapi"},{text:"Blocked Account",value:"limit_wc"},{text:"Too Many Calls to /userinfo",value:"limit_ui"},{text:"Rate Limit On API",value:"api_limit"},{text:"Successful User Deletion",value:"sdu"},{text:"Failed User Deletion",value:"fdu"},{text:"Blocked Account",value:"limit_wc"},{text:"Blocked IP Address",value:"limit_mu"},{text:"Success Logout",value:"slo"},{text:"Failed Logout",value:"flo"},{text:"Success Delegation",value:"sd"},{text:"Failed Delegation",value:"fd"}]}}}},function(e,t){function r(e,t,r,o){return JSON.stringify(e,n(t,o),r)}function n(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(o,i){if(r.length>0){var s=r.indexOf(this);~s?r.splice(s+1):r.push(this),~s?n.splice(s,1/0,o):n.push(o),~r.indexOf(i)&&(i=t.call(this,o,i))}else r.push(i);return null==e?i:e.call(this,o,i)}}t=e.exports=r,t.getSerialize=n},function(e,t){function r(e){this.message=e}function n(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,s=0,a=0,u="";i=t.charAt(a++);~i&&(n=s%4?64*n+i:i,s++%4)?u+=String.fromCharCode(255&n>>(-2*s&6)):0)i=o.indexOf(i);return u}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||n},function(e,t,r){function n(e){return decodeURIComponent(o(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}var o=r(41);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return n(t)}catch(e){return o(t)}}},function(e,t){function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function n(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););return e}function o(e,t){return!!(e?e.length:0)&&s(e,t,0)>-1}function i(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function s(e,t,r){if(t!==t)return i(e,a,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function a(e){return e!==e}function u(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&n++;return n}function c(e,t){return null==e?void 0:e[t]}function l(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function f(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var s=e[r];s!==t&&s!==z||(e[r]=z,i[o++]=r)}return i}function p(e){return I(e)?Le(e):{}}function h(e){return!(!I(e)||L(e))&&(j(e)||l(e)?Ce:de).test(N(e))}function d(e,t,r,n){for(var o=-1,i=e.length,s=r.length,a=-1,u=t.length,c=Oe(i-s,0),l=Array(u+c),f=!n;++a<u;)l[a]=t[a];for(;++o<s;)(f||o<i)&&(l[r[o]]=e[o]);for(;c--;)l[a++]=e[o++];return l}function g(e,t,r,n){for(var o=-1,i=e.length,s=-1,a=r.length,u=-1,c=t.length,l=Oe(i-a,0),f=Array(l+c),p=!n;++o<l;)f[o]=e[o];for(var h=o;++u<c;)f[h+u]=t[u];for(;++s<a;)(p||o<i)&&(f[h+r[s]]=e[o++]);return f}function v(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function m(e,t,r){function n(){return(this&&this!==xe&&this instanceof n?i:e).apply(o?r:this,arguments)}var o=t&G,i=_(e);return n}function _(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=p(e.prototype),n=e.apply(r,t);return I(n)?n:r}}function y(e,t,n){function o(){for(var s=arguments.length,a=Array(s),u=s,c=A(o);u--;)a[u]=arguments[u];var l=s<3&&a[0]!==c&&a[s-1]!==c?[]:f(a,c);return(s-=l.length)<n?w(e,t,x,o.placeholder,void 0,a,l,void 0,void 0,n-s):r(this&&this!==xe&&this instanceof o?i:e,this,a)}var i=_(e);return o}function x(e,t,r,n,o,i,s,a,c,l){function p(){for(var S=arguments.length,k=Array(S),T=S;T--;)k[T]=arguments[T];if(y)var C=A(p),L=u(k,C);if(n&&(k=d(k,n,o,y)),i&&(k=g(k,i,s,y)),S-=L,y&&S<l){var N=f(k,C);return w(e,t,x,p.placeholder,r,k,N,a,c,l-S)}var U=v?r:this,j=m?U[e]:e;return S=k.length,a?k=O(k,a):b&&S>1&&k.reverse(),h&&c<S&&(k.length=c),this&&this!==xe&&this instanceof p&&(j=E||_(j)),j.apply(U,k)}var h=t&J,v=t&G,m=t&$,y=t&(W|K),b=t&Q,E=m?void 0:_(e);return p}function b(e,t,n,o){function i(){for(var t=-1,u=arguments.length,c=-1,l=o.length,f=Array(l+u),p=this&&this!==xe&&this instanceof i?a:e;++c<l;)f[c]=o[c];for(;u--;)f[c++]=arguments[++t];return r(p,s?n:this,f)}var s=t&G,a=_(e);return i}function w(e,t,r,n,o,i,s,a,u,c){var l=t&W,f=l?s:void 0,p=l?void 0:s,h=l?i:void 0,d=l?void 0:i;t|=l?X:Y,(t&=~(l?Y:X))&V||(t&=~(G|$));var g=r(e,t,o,h,f,d,p,a,u,c);return g.placeholder=n,je(g,e,t)}function E(e,t,r,n,o,i,s,a){var u=t&$;if(!u&&"function"!=typeof e)throw new TypeError(B);var c=n?n.length:0;if(c||(t&=~(X|Y),n=o=void 0),s=void 0===s?s:Oe(q(s),0),a=void 0===a?a:q(a),c-=o?o.length:0,t&Y){var l=n,f=o;n=o=void 0}var p=[e,t,r,n,o,l,f,i,s,a];if(e=p[0],t=p[1],r=p[2],n=p[3],o=p[4],a=p[9]=null==p[9]?u?0:e.length:Oe(p[9]-c,0),!a&&t&(W|K)&&(t&=~(W|K)),t&&t!=G)h=t==W||t==K?y(e,t,a):t!=X&&t!=(G|X)||o.length?x.apply(void 0,p):b(e,t,r,n);else var h=m(e,t,r);return je(h,e,t)}function A(e){return e.placeholder}function S(e,t){var r=c(e,t);return h(r)?r:void 0}function k(e){var t=e.match(le);return t?t[1].split(fe):[]}function T(e,t){var r=t.length,n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}function C(e,t){return!!(t=null==t?ee:t)&&("number"==typeof e||ve.test(e))&&e>-1&&e%1==0&&e<t}function L(e){return!!Ae&&Ae in e}function O(e,t){for(var r=e.length,n=Ne(t.length,r),o=v(e);n--;){var i=t[n];e[n]=C(i,r)?o[i]:void 0}return e}function N(e){if(null!=e){try{return Se.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function U(e,t){return n(ne,function(r){var n="_."+r[0];t&r[1]&&!o(e,n)&&e.push(n)}),e.sort()}function j(e){var t=I(e)?Te.call(e):"";return t==oe||t==ie}function I(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function R(e){return!!e&&"object"==typeof e}function M(e){return"symbol"==typeof e||R(e)&&Te.call(e)==se}function D(e){if(!e)return 0===e?e:0;if((e=P(e))===Z||e===-Z){return(e<0?-1:1)*te}return e===e?e:0}function q(e){var t=D(e),r=t%1;return t===t?r?t-r:t:0}function P(e){if("number"==typeof e)return e;if(M(e))return re;if(I(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=I(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ue,"");var r=he.test(e);return r||ge.test(e)?me(e.slice(2),r?2:8):pe.test(e)?re:+e}function F(e){return function(){return e}}function H(e){return e}var B="Expected a function",z="__lodash_placeholder__",G=1,$=2,V=4,W=8,K=16,X=32,Y=64,J=128,Q=512,Z=1/0,ee=9007199254740991,te=1.7976931348623157e308,re=NaN,ne=[["ary",J],["bind",G],["bindKey",$],["curry",W],["curryRight",K],["flip",Q],["partial",X],["partialRight",Y],["rearg",256]],oe="[object Function]",ie="[object GeneratorFunction]",se="[object Symbol]",ae=/[\\^$.*+?()[\]{}|]/g,ue=/^\s+|\s+$/g,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,fe=/,? & /,pe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,de=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,me=parseInt,_e="object"==typeof global&&global&&global.Object===Object&&global,ye="object"==typeof self&&self&&self.Object===Object&&self,xe=_e||ye||Function("return this")(),be=Function.prototype,we=Object.prototype,Ee=xe["__core-js_shared__"],Ae=function(){var e=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Se=be.toString,ke=we.hasOwnProperty,Te=we.toString,Ce=RegExp("^"+Se.call(ke).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=Object.create,Oe=Math.max,Ne=Math.min,Ue=function(){var e=S(Object,"defineProperty"),t=S.name;return t&&t.length>2?e:void 0}(),je=Ue?function(e,t,r){var n=t+"";return Ue(e,"toString",{configurable:!0,enumerable:!1,value:F(T(n,U(k(n),r)))})}:H,Ie=function(e,t){return t=Oe(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Oe(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=s,r(e,this,a)}}(function(e,t,r){var n=G;if(r.length){var o=f(r,A(Ie));n|=X}return E(e,n,t,r,o)});Ie.placeholder={},e.exports=Ie},function(e,t){function r(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););return e}function n(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function o(e,t){var r=N(e)||l(e)?n(e.length,String):[],o=r.length,i=!!o;for(var s in e)!t&&!S.call(e,s)||i&&("length"==s||a(s,o))||r.push(s);return r}function i(e,t){return e&&O(e,t,m)}function s(e){if(!u(e))return C(e);var t=[];for(var r in Object(e))S.call(e,r)&&"constructor"!=r&&t.push(r);return t}function a(e,t){return!!(t=null==t?y:t)&&("number"==typeof e||E.test(e))&&e>-1&&e%1==0&&e<t}function u(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||A)}function c(e,t){return(N(e)?r:L)(e,"function"==typeof t?t:_)}function l(e){return p(e)&&S.call(e,"callee")&&(!T.call(e,"callee")||k.call(e)==x)}function f(e){return null!=e&&d(e.length)&&!h(e)}function p(e){return v(e)&&f(e)}function h(e){var t=g(e)?k.call(e):"";return t==b||t==w}function d(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=y}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){return!!e&&"object"==typeof e}function m(e){return f(e)?o(e):s(e)}function _(e){return e}var y=9007199254740991,x="[object Arguments]",b="[object Function]",w="[object GeneratorFunction]",E=/^(?:0|[1-9]\d*)$/,A=Object.prototype,S=A.hasOwnProperty,k=A.toString,T=A.propertyIsEnumerable,C=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),L=function(e,t){return function(r,n){if(null==r)return r;if(!f(r))return e(r,n);for(var o=r.length,i=t?o:-1,s=Object(r);(t?i--:++i<o)&&!1!==n(s[i],i,s););return r}}(i),O=function(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var u=s[e?a:++o];if(!1===r(i[u],u,i))break}return t}}(),N=Array.isArray;e.exports=c},function(e,t,r){(function(e){function r(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}function n(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function o(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function i(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function s(e,t){return e.has(t)}function a(e,t){return null==e?void 0:e[t]}function u(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function c(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function f(){this.__data__=Et?Et(null):{},this.size=0}function p(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function h(e){var t=this.__data__;if(Et){var r=t[e];return r===me?void 0:r}return it.call(t,e)?t[e]:void 0}function d(e){var t=this.__data__;return Et?void 0!==t[e]:it.call(t,e)}function g(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Et&&void 0===t?me:t,this}function v(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function m(){this.__data__=[],this.size=0}function _(e){var t=this.__data__,r=q(t,e);return!(r<0)&&(r==t.length-1?t.pop():ht.call(t,r,1),--this.size,!0)}function y(e){var t=this.__data__,r=q(t,e);return r<0?void 0:t[r][1]}function x(e){return q(this.__data__,e)>-1}function b(e,t){var r=this.__data__,n=q(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function w(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function E(){this.size=0,this.__data__={hash:new l,map:new(yt||v),string:new l}}function A(e){var t=J(this,e).delete(e);return this.size-=t?1:0,t}function S(e){return J(this,e).get(e)}function k(e){return J(this,e).has(e)}function T(e,t){var r=J(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function C(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new w;++t<r;)this.add(e[t])}function L(e){return this.__data__.set(e,me),this}function O(e){return this.__data__.has(e)}function N(e){var t=this.__data__=new v(e);this.size=t.size}function U(){this.__data__=new v,this.size=0}function j(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function I(e){return this.__data__.get(e)}function R(e){return this.__data__.has(e)}function M(e,t){var r=this.__data__;if(r instanceof v){var n=r.__data__;if(!yt||n.length<ve-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new w(n)}return r.set(e,t),this.size=r.size,this}function D(e,t){var r=It(e),n=!r&&jt(e),o=!r&&!n&&Rt(e),s=!r&&!n&&!o&&Mt(e),a=r||n||o||s,u=a?i(e.length,String):[],c=u.length;for(var l in e)!t&&!it.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ee(l,c))||u.push(l);return u}function q(e,t){for(var r=e.length;r--;)if(se(e[r][0],t))return r;return-1}function P(e,t,r){var o=t(e);return It(e)?o:n(o,r(e))}function F(e){return null==e?void 0===e?qe:Ne:dt&&dt in Object(e)?Z(e):oe(e)}function H(e){return pe(e)&&F(e)==be}function B(e,t,r,n,o){return e===t||(null==e||null==t||!pe(e)&&!pe(t)?e!==e&&t!==t:z(e,t,r,n,B,o))}function z(e,t,r,n,o,i){var s=It(e),a=It(t),u=s?we:Ut(e),c=a?we:Ut(t);u=u==be?Ue:u,c=c==be?Ue:c;var l=u==Ue,f=c==Ue,p=u==c;if(p&&Rt(e)){if(!Rt(t))return!1;s=!0,l=!1}if(p&&!l)return i||(i=new N),s||Mt(e)?W(e,t,r,n,o,i):K(e,t,u,r,n,o,i);if(!(r&_e)){var h=l&&it.call(e,"__wrapped__"),d=f&&it.call(t,"__wrapped__");if(h||d){var g=h?e.value():e,v=d?t.value():t;return i||(i=new N),o(g,v,r,n,i)}}return!!p&&(i||(i=new N),X(e,t,r,n,o,i))}function G(e){return!(!fe(e)||re(e))&&(ce(e)?ut:Be).test(ie(e))}function $(e){return pe(e)&&le(e.length)&&!!Ge[F(e)]}function V(e){if(!ne(e))return mt(e);var t=[];for(var r in Object(e))it.call(e,r)&&"constructor"!=r&&t.push(r);return t}function W(e,t,r,n,i,a){var u=r&_e,c=e.length,l=t.length;if(c!=l&&!(u&&l>c))return!1;var f=a.get(e);if(f&&a.get(t))return f==t;var p=-1,h=!0,d=r&ye?new C:void 0;for(a.set(e,t),a.set(t,e);++p<c;){var g=e[p],v=t[p];if(n)var m=u?n(v,g,p,t,e,a):n(g,v,p,e,t,a);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!o(t,function(e,t){if(!s(d,t)&&(g===e||i(g,e,r,n,a)))return d.push(t)})){h=!1;break}}else if(g!==v&&!i(g,v,r,n,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function K(e,t,r,n,o,i,s){switch(r){case Fe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Pe:return!(e.byteLength!=t.byteLength||!i(new ft(e),new ft(t)));case Ae:case Se:case Oe:return se(+e,+t);case ke:return e.name==t.name&&e.message==t.message;case Ie:case Me:return e==t+"";case Le:var a=u;case Re:var l=n&_e;if(a||(a=c),e.size!=t.size&&!l)return!1;var f=s.get(e);if(f)return f==t;n|=ye,s.set(e,t);var p=W(a(e),a(t),n,o,i,s);return s.delete(e),p;case De:if(Ot)return Ot.call(e)==Ot.call(t)}return!1}function X(e,t,r,n,o,i){var s=r&_e,a=Y(e),u=a.length;if(u!=Y(t).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in t:it.call(t,l)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var p=!0;i.set(e,t),i.set(t,e);for(var h=s;++c<u;){l=a[c];var d=e[l],g=t[l];if(n)var v=s?n(g,d,l,t,e,i):n(d,g,l,e,t,i);if(!(void 0===v?d===g||o(d,g,r,n,i):v)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var m=e.constructor,_=t.constructor;m!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return i.delete(e),i.delete(t),p}function Y(e){return P(e,he,Nt)}function J(e,t){var r=e.__data__;return te(t)?r["string"==typeof t?"string":"hash"]:r.map}function Q(e,t){var r=a(e,t);return G(r)?r:void 0}function Z(e){var t=it.call(e,dt),r=e[dt];try{e[dt]=void 0;var n=!0}catch(e){}var o=at.call(e);return n&&(t?e[dt]=r:delete e[dt]),o}function ee(e,t){return!!(t=null==t?xe:t)&&("number"==typeof e||ze.test(e))&&e>-1&&e%1==0&&e<t}function te(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function re(e){return!!st&&st in e}function ne(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||rt)}function oe(e){return at.call(e)}function ie(e){if(null!=e){try{return ot.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function se(e,t){return e===t||e!==e&&t!==t}function ae(e){return null!=e&&le(e.length)&&!ce(e)}function ue(e,t){return B(e,t)}function ce(e){if(!fe(e))return!1;var t=F(e);return t==Te||t==Ce||t==Ee||t==je}function le(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=xe}function fe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function pe(e){return null!=e&&"object"==typeof e}function he(e){return ae(e)?D(e):V(e)}function de(){return[]}function ge(){return!1}var ve=200,me="__lodash_hash_undefined__",_e=1,ye=2,xe=9007199254740991,be="[object Arguments]",we="[object Array]",Ee="[object AsyncFunction]",Ae="[object Boolean]",Se="[object Date]",ke="[object Error]",Te="[object Function]",Ce="[object GeneratorFunction]",Le="[object Map]",Oe="[object Number]",Ne="[object Null]",Ue="[object Object]",je="[object Proxy]",Ie="[object RegExp]",Re="[object Set]",Me="[object String]",De="[object Symbol]",qe="[object Undefined]",Pe="[object ArrayBuffer]",Fe="[object DataView]",He=/[\\^$.*+?()[\]{}|]/g,Be=/^\[object .+?Constructor\]$/,ze=/^(?:0|[1-9]\d*)$/,Ge={};Ge["[object Float32Array]"]=Ge["[object Float64Array]"]=Ge["[object Int8Array]"]=Ge["[object Int16Array]"]=Ge["[object Int32Array]"]=Ge["[object Uint8Array]"]=Ge["[object Uint8ClampedArray]"]=Ge["[object Uint16Array]"]=Ge["[object Uint32Array]"]=!0,Ge[be]=Ge[we]=Ge[Pe]=Ge[Ae]=Ge[Fe]=Ge[Se]=Ge[ke]=Ge[Te]=Ge[Le]=Ge[Oe]=Ge[Ue]=Ge[Ie]=Ge[Re]=Ge[Me]=Ge["[object WeakMap]"]=!1;var $e="object"==typeof global&&global&&global.Object===Object&&global,Ve="object"==typeof self&&self&&self.Object===Object&&self,We=$e||Ve||Function("return this")(),Ke="object"==typeof t&&t&&!t.nodeType&&t,Xe=Ke&&"object"==typeof e&&e&&!e.nodeType&&e,Ye=Xe&&Xe.exports===Ke,Je=Ye&&$e.process,Qe=function(){try{return Je&&Je.binding&&Je.binding("util")}catch(e){}}(),Ze=Qe&&Qe.isTypedArray,et=Array.prototype,tt=Function.prototype,rt=Object.prototype,nt=We["__core-js_shared__"],ot=tt.toString,it=rt.hasOwnProperty,st=function(){var e=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),at=rt.toString,ut=RegExp("^"+ot.call(it).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=Ye?We.Buffer:void 0,lt=We.Symbol,ft=We.Uint8Array,pt=rt.propertyIsEnumerable,ht=et.splice,dt=lt?lt.toStringTag:void 0,gt=Object.getOwnPropertySymbols,vt=ct?ct.isBuffer:void 0,mt=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),_t=Q(We,"DataView"),yt=Q(We,"Map"),xt=Q(We,"Promise"),bt=Q(We,"Set"),wt=Q(We,"WeakMap"),Et=Q(Object,"create"),At=ie(_t),St=ie(yt),kt=ie(xt),Tt=ie(bt),Ct=ie(wt),Lt=lt?lt.prototype:void 0,Ot=Lt?Lt.valueOf:void 0;l.prototype.clear=f,l.prototype.delete=p,l.prototype.get=h,l.prototype.has=d,l.prototype.set=g,v.prototype.clear=m,v.prototype.delete=_,v.prototype.get=y,v.prototype.has=x,v.prototype.set=b,w.prototype.clear=E,w.prototype.delete=A,w.prototype.get=S,w.prototype.has=k,w.prototype.set=T,C.prototype.add=C.prototype.push=L,C.prototype.has=O,N.prototype.clear=U,N.prototype.delete=j,N.prototype.get=I,N.prototype.has=R,N.prototype.set=M;var Nt=gt?function(e){return null==e?[]:(e=Object(e),r(gt(e),function(t){return pt.call(e,t)}))}:de,Ut=F;(_t&&Ut(new _t(new ArrayBuffer(1)))!=Fe||yt&&Ut(new yt)!=Le||xt&&"[object Promise]"!=Ut(xt.resolve())||bt&&Ut(new bt)!=Re||wt&&"[object WeakMap]"!=Ut(new wt))&&(Ut=function(e){var t=F(e),r=t==Ue?e.constructor:void 0,n=r?ie(r):"";if(n)switch(n){case At:return Fe;case St:return Le;case kt:return"[object Promise]";case Tt:return Re;case Ct:return"[object WeakMap]"}return t});var jt=H(function(){return arguments}())?H:function(e){return pe(e)&&it.call(e,"callee")&&!pt.call(e,"callee")},It=Array.isArray,Rt=vt||ge,Mt=Ze?function(e){return function(t){return e(t)}}(Ze):$;e.exports=ue}).call(t,r(30)(e))},function(e,t,r){var n,o=r(48),i=function(e,t){return n instanceof o.Logger||(n=o.createLogger(e,t)),n};e.exports={cleanUpAll:o.cleanUpAll,createLogger:o.createLogger,flushAll:o.flushAll,Logger:o.Logger,setupDefaultLogger:i}},function(e,t,r){var n=r(16);e.exports={LOG_LEVELS:["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"],DEFAULT_REQUEST_HEADER:{"Content-Type":"application/json; charset=UTF-8"},DEFAULT_REQUEST_TIMEOUT:18e4,MS_IN_A_DAY:864e5,MAX_REQUEST_TIMEOUT:3e5,MAX_LINE_LENGTH:32e3,MAX_INPUT_LENGTH:80,FLUSH_INTERVAL:250,FLUSH_BYTE_LIMIT:"test"===r.i({NODE_ENV:"production",CLIENT_VERSION:"1.0.0"}).test?32e4:5e6,AGENT_SETTING:{maxSockets:20,keepAliveTimeout:6e4},AGENT_PROTOCOL:"test"===r.i({NODE_ENV:"production",CLIENT_VERSION:"1.0.0"}).test?n:n.HttpsAgent,LOGDNA_URL:"test"===r.i({NODE_ENV:"production",CLIENT_VERSION:"1.0.0"}).test?"http://localhost:1337":"https://logs.logdna.com/logs/ingest",MAC_ADDR_CHECK:/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,IP_ADDR_CHECK:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,REQUEST_WITH_CREDENTIALS:!1}},function(e,t,r){function n(e){return!isNaN(e)&&(0|parseFloat(e))===parseFloat(e)}function o(e,t,r){if(!r||e){if(!e||"string"!=typeof e)throw new Error(t+" is undefined or not passed as a String");if(e.length>v.MAX_INPUT_LENGTH)throw new Error(t+" cannot be longer than "+v.MAX_INPUT_LENGTH+" chars")}}function i(e){return!(!(new Date(e).getTime()>0)||Math.abs(e-Date.now())>v.MS_IN_A_DAY)||(p("Error: The timestamp used is either invalid or not within one day. Date.now() will be used in its place."),!1)}function s(e,t){if(!(this instanceof s))return new s(e,t);if(o(e,"LogDNA Ingestion Key",!1),o(t.hostname,"Hostname",!0),o(t.mac,"MAC Address",!0),o(t.ip,"IP Address",!0),o(t.level,"Level",!0),o(t.app,"App",!0),o(t.tags,"Tags",!0),t.timeout){if(!n(t.timeout))throw new Error("Timeout must be an Integer");if(t.timeout>v.MAX_REQUEST_TIMEOUT)throw new Error("Timeout cannot be longer than"+v.MAX_REQUEST_TIMEOUT)}if(t.mac&&!v.MAC_ADDR_CHECK.test(t.mac))throw new Error("Invalid MAC Address format");if(t.ip&&!v.IP_ADDR_CHECK.test(t.ip))throw new Error("Invalid IP Address format");this._max_length=t.max_length||!0,this._index_meta=t.index_meta||!1,this._flushLimit=v.FLUSH_BYTE_LIMIT,this._url=v.LOGDNA_URL;var r=v.AGENT_PROTOCOL;this._agent=new r(v.AGENT_SETTING),this._bufByteLength=0,this._buf=[],this.source={hostname:t.hostname||a.hostname(),app:t.app||"default",level:t.level||"INFO",env:t.env||void 0,tags:t.tags||void 0},this._req=u.defaults({auth:{username:e},agent:this._agent,headers:v.DEFAULT_REQUEST_HEADER,qs:{hostname:this.source.hostname,mac:t.mac,ip:t.ip,tags:this.source.tags},timeout:t.timeout||v.DEFAULT_REQUEST_TIMEOUT,withCredentials:t.with_credentials||v.REQUEST_WITH_CREDENTIALS}),m.push(this)}var a=r(66),u=r(67),c=r(50),l=r(40),f=r(6),p=f.debuglog("logdna"),h=r(43),d=r(45),g=r(44),v=r(47),m=[];s.prototype.log=function(e,t){this._err=!1,"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),e=l(e,null,2,function(){}));var r={timestamp:Date.now(),line:e,level:this.source.level,app:this.source.app,env:this.source.env};if(t&&("string"==typeof t?(t.length>v.MAX_INPUT_LENGTH&&(p("Level had more than "+v.MAX_INPUT_LENGTH+" chars, was truncated"),t=t.substring(0,v.MAX_INPUT_LENGTH)),r.level=t):("object"!=typeof t&&(this._err=!0,p("Can only pass a String or JSON object as additional parameter")),r.level=t.level||r.level,r.app=t.app||r.app,r.env=t.env||r.env,t.timestamp&&i(t.timestamp)&&(r.timestamp=t.timestamp),t.context&&!t.meta&&(t.meta=t.context),"object"==typeof t.meta&&(this._index_meta||t.index_meta?r.meta=t.meta:r.meta=l(t.meta)))),this._err)return this._err;this._bufferLog(r)},s.prototype._bufferLog=function(e){return e&&e.line?(this._max_length&&e.line.length>v.MAX_LINE_LENGTH&&(e.line=e.line.substring(0,v.MAX_LINE_LENGTH)+" (cut off, too long...)",p("Line was longer than "+v.MAX_LINE_LENGTH+" chars and was truncated.")),this._bufByteLength+=c(e),p("Buffering message: %s",e.line),this._buf.push(e),this._bufByteLength>=this._flushLimit?(p("Buffer size meets (or exceeds) flush limit.  Immediately flushing"),void this._flush()):void(this._flusher||(p("No scheduled flush. Scheduling for %d ms from now.",v.FLUSH_INTERVAL),this._flusher=setTimeout(h(this._flush,this),v.FLUSH_INTERVAL)))):void p("Ignoring empty message")},s.prototype._flush=function(e){if(!this._req||0===this._buf.length)return p("Nothing to flush"),e&&e();var t={e:"ls",ls:this._buf},r=l(t),n=this._buf.map(function(e){return e.line});this._bufByteLength=0,this._buf.length=0,clearTimeout(this._flusher),this._flusher=null,this._req.post(this._url,{body:r,qs:{now:Date.now()}},function(t,r,o){return t?p("Encountered an Error in POST Request: %j",t):p("API success: %j",{lines:n,httpStatus:r.statusCode,body:o}),e&&e(t)})},s.prototype._cleanUp=function(e){this._flush(e);for(var t=0;t<m.length;t++)if(d(m[t],this))return void m.splice(t,1)},g(v.LOG_LEVELS,function(e){var t=e.toLowerCase();s.prototype[t]=function(t,r){r=r||{},r.level=e,this.log(t,r)}});var _=function(e){function t(){r--<=1&&e()}var r=m.length;if(r)for(var n=0;n<m.length;n++)m[n]._flush(t);else e()};t.Logger=s,t.createLogger=function(e,t){var r=new s(e,t);return m.push(r),r},t.flushAll=_,t.cleanUpAll=function(e){_(e),m=[]}},function(e,t){e.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(e,t,r){"use strict";function n(e){if(null!==e&&"object"==typeof e){if(i.isBuffer(e))return e.length;var t=0;for(var r in e)if(Object.hasOwnProperty.call(e,r)){t+=n(r);try{t+=n(e[r])}catch(e){e instanceof RangeError&&(t=0)}}return t}return"string"==typeof e?e.length*o.STRING:"boolean"==typeof e?o.BOOLEAN:"number"==typeof e?o.NUMBER:0}var o=r(49),i=r(55).Buffer;e.exports=n},function(e,t,r){function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var i=r(70);e.exports=i(n),e.exports.strict=i(o),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(e,t){e.exports=require("async@2.1.2")},function(e,t){e.exports=require("auth0-log-extension-tools@1.3.6")},function(e,t){e.exports=require("body-parser@1.12.4")},function(e,t){e.exports=require("buffer")},function(e,t){e.exports=require("cookie-signature@1.0.6")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("ejs@2.3.1")},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("jwks-rsa@1.1.1")},function(e,t){e.exports=require("lodash@3.10.1")},function(e,t){e.exports=require("moment@2.10.3")},function(e,t){e.exports=require("morgan@1.5.3")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("request@2.56.0")},function(e,t){e.exports=require("webtask-tools")},function(e,t){e.exports=require("winston@1.0.0")},function(e,t){e.exports=require("wrappy@1.0.1")}]);